<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ynes Cabrera ‚Äî Arte</title>

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">

  <!-- Ajustes puntuales -->
  <style>
    /* Videos bien encuadrados */
    .hero video,.card-media video,.collection-media video{width:100%;height:100%;object-fit:cover;object-position:center;display:block}
    .hero{position:relative;min-height:80vh;overflow:hidden}
    .hero>video{position:absolute;inset:0}
    .hero .content{position:relative;z-index:1}

    .card-media,.collection-media{position:relative;overflow:hidden}
    .card-media{aspect-ratio:16/9}
    .collection-media{aspect-ratio:16/9}

    /* Form reservar: que se vea ordenado */
    .reservar-wrap{max-width:760px;margin:auto}
    #reservaForm .row{margin-bottom:12px}
    #reservaForm fieldset{margin:14px 0;border:1px solid rgba(255,255,255,.15);border-radius:12px;padding:12px}
    #reservaForm fieldset legend{padding:0 .4rem;opacity:.9;font-weight:600}
    .check-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px}
    .check-grid label{display:flex;align-items:center;gap:.5rem;padding:.45rem .6rem;border:1px solid rgba(255,255,255,.12);border-radius:10px}
    .cond{display:grid;grid-template-columns:1fr;gap:8px;margin-top:8px}
    .hint{opacity:.8}
    @media (max-width:520px){.check-grid{grid-template-columns:1fr}}
  </style>
</head>
<body>

  <!-- HEADER FIJO -->
  <header class="site-header">
    <div class="nav-wrap">
      <a class="brand" href="index.html" aria-label="Ir al inicio">YNES CABRERA</a>

      <nav class="main-nav" aria-label="Principal">
        <a href="escultura-ceramica.html">Escultura & Cer√°mica</a>
        <a href="oleos.html">√ìleos</a>
        <a href="papel-agua.html">Papel & Agua</a>
        <a class="cta" href="#reservar">Reservar</a>
      </nav>

      <div class="search">
        <input id="siteSearch" type="search" placeholder="Buscar obra‚Ä¶" aria-label="Buscar obra por nombre" autocomplete="off">
        <ul id="searchResults" class="results" role="listbox" aria-label="Resultados de b√∫squeda"></ul>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <header class="hero" role="banner" aria-label="Portada con video de fondo">
    <video class="lazy-video" poster="imagenes/Hide,image.HEIC" autoplay muted loop playsinline data-src="videos/hide.mov"></video>
    <div class="content">
      <div class="copy">
        <h1>
          Explora la exquisitez del arte latinoamericano a trav√©s de
          nuestras galer√≠as cuidadosamente curadas, donde cada pieza
          cuenta con un singular linaje cultural y est√©tico.
        </h1>
        <p>Sum√©rgete en un mundo donde la creatividad y la tradici√≥n se entrelazan con elegancia y profundidad.</p>
        <a class="link" href="#destacados">LEER M√ÅS</a>
      </div>
    </div>
  </header>

  <main id="destacados">
    <!-- DESTACADOS -->
    <section class="section">
      <div class="topbar"><h2>Productos destacados</h2></div>

      <div class="cards">
        <article class="card">
          <div class="card-media">
            <video class="lazy-video" poster="imagenes/Ceramica.png" autoplay muted loop playsinline data-src="videos/escultura.mov"></video>
          </div>
          <div class="card-body">
            <h3 class="card-title">Escultura & Cer√°mica</h3>
            <div class="card-meta">
              <span>Formas que cobran vida.</span>
              <a href="escultura-ceramica.html">Ver serie</a>
            </div>
          </div>
        </article>

        <article class="card">
          <div class="card-media">
            <video class="lazy-video" poster="imagenes/Oleoimag.png" autoplay muted loop playsinline data-src="videos/oleo.mov"></video>
          </div>
          <div class="card-body">
            <h3 class="card-title">√ìleos</h3>
            <div class="card-meta">
              <span>Luz, textura y quietud.</span>
              <a href="oleos.html">Ver serie</a>
            </div>
          </div>
        </article>

        <article class="card">
          <div class="card-media">
            <video class="lazy-video" poster="imagenes/Papelimg.png" autoplay muted loop playsinline data-src="videos/papelyagua.mov"></video>
          </div>
          <div class="card-body">
            <h3 class="card-title">Papel & Agua</h3>
            <div class="card-meta">
              <span>L√°piz y acuarela.</span>
              <a href="papel-agua.html">Ver serie</a>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- ============ RESERVAR (form real conectado a Firebase) ============ -->
    <section id="reservar" class="section anchor">
      <div class="series reservar-wrap">
        <h3>Reservar</h3>
        <p>¬øQuieres una visita al taller o encargar una pieza? D√©jame tus datos.</p>

        <form id="reservaForm" class="pedido-form" autocomplete="on">
          <!-- Autorrelleno / solo lectura si viene por query -->
          <div class="row">
            <label for="f_obra">Obra / Producto</label>
            <input id="f_obra" name="obra" type="text" placeholder="Ej.: Juntos / Tarjeta impresa" readonly>
          </div>
          <div class="row">
        
            <div class="row">
  <label for="f_categoria">Categor√≠a</label>
  <select id="f_categoria" name="categoria" required>
    <option value="">-- Selecciona una categor√≠a --</option>
    <option value="√ìleos">√ìleos</option>
    <option value="Papel & Agua">Papel & Agua</option>
    <option value="Escultura & Cer√°mica">Escultura & Cer√°mica</option>
  </select>
</div>

          </div>
          <!-- Tipo (original / tarjeta / visita / encargo) -->
          <input id="f_tipo" name="tipo" type="hidden" value="encargo">

          <!-- Datos del contacto -->
          <div class="row">
            <label for="f_nombre">Nombre completo</label>
            <input id="f_nombre" name="nombre" type="text" required>
          </div>
          <div class="row">
            <label for="f_tel">WhatsApp / Tel√©fono</label>
            <input id="f_tel" name="telefono" type="tel" required>
          </div>
          <div class="row">
            <label for="f_email">Correo</label>
            <input id="f_email" name="email" type="email" placeholder="opcional">
          </div>
          <div class="row">
            <label for="f_pais">Pa√≠s</label>
            <input id="f_pais" name="pais" type="text" placeholder="Per√∫, M√©xico, Espa√±a‚Ä¶" required>
          </div>

          <fieldset class="row">
            <legend>¬øPor d√≥nde prefieres que te contacte el artista?</legend>
            <div class="check-grid">
              <label><input type="checkbox" name="medio" value="whatsapp"> WhatsApp</label>
              <label><input type="checkbox" name="medio" value="email"> E-mail</label>
              <label><input type="checkbox" name="medio" value="instagram"> Instagram</label>
              <label><input type="checkbox" name="medio" value="facebook"> Facebook</label>
            </div>
          </fieldset>

          <div class="row">
            <label for="f_notas">Notas</label>
            <textarea id="f_notas" name="notas" rows="4" placeholder="Cu√©ntame detalles del encargo, medidas, plazos, etc."></textarea>
          </div>

          <div class="actions">
            <button id="f_submit" class="btn btn--primary" type="submit">Enviar pedido</button>
            <span id="f_status" class="hint" style="margin-left:12px"></span>
          </div>
        </form>
      </div>
    </section>

    <!-- ACERCA DEL ARTISTA -->
    <section class="about-mw section" id="acerca">
      <div class="mw-row">
        <figure class="mw-media slider mw-fade">
          <div class="mw-slides">
            <img src="imagenes/ynes1.jpg" alt="Ynes Cabrera en su taller">
            <img src="imagenes/ynes2.jpg" alt="Ynes Cabrera pintando">
            <img src="imagenes/ynes3.jpg" alt="Ynes Cabrera con una obra">
          </div>
          <a class="mw-ig" href="https://instagram.com/" target="_blank" rel="noopener">
            <span class="mw-ig__icon">üì∑</span> @ynes.cabrera
          </a>
        </figure>

        <div class="mw-copy">
          <span class="mw-eyebrow">ACERCA DEL ARTISTA</span>
          <h2>Ynes Cabrera: 30 a√±os de arte y pasi√≥n</h2>
          <p>
            Con m√°s de <strong>100 piezas</strong> creadas a lo largo de tres d√©cadas,
            formada en el <strong>Museo de Arte de Lima</strong> y dotada de un talento innato,
            Ynes explora √≥leo, cer√°mica y acuarela con una sensibilidad √∫nica.
          </p>
          <p>
            En <strong>2025</strong> decide ir m√°s all√° del boca a boca y abre su galer√≠a digital,
            invit√°ndote a descubrir su universo creativo en redes y en esta p√°gina exclusiva.
          </p>
          <a class="btn-solid" href="https://www.instagram.com/galeriarte_k19?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" rel="noopener">Ver Instagram</a>
        </div>
      </div>
    </section>

    <!-- COLECCIONES DESTACADAS (restaurado) -->
    <section class="collections section" id="colecciones">
      <h2>Colecciones destacadas</h2>
      <div class="collections-grid">

        <article class="collection-card">
          <a class="collection-link" href="escultura-ceramica.html" aria-label="Explorar Fuego y Arcilla">
            <div class="collection-media">
              <video class="lazy-video" poster="imagenes/coleccion-ceramica.jpg" autoplay muted loop playsinline data-src="videos/Ceramicatranscision.mov"></video>
            </div>
            <div class="collection-body">
              <h3 class="collection-title">Fuego y Arcilla</h3>
              <p class="collection-meta">Cer√°mica funcional que calienta el alma.</p>
              <span class="collection-cta">Explorar</span>
            </div>
          </a>
        </article>

        <article class="collection-card">
          <a class="collection-link" href="papel-agua.html" aria-label="Explorar Trazos del Per√∫">
            <div class="collection-media">
              <video class="lazy-video" poster="imagenes/coleccion-papel.jpg" autoplay muted loop playsinline data-src="videos/Agua.mov"></video>
            </div>
            <div class="collection-body">
              <h3 class="collection-title">Trazos del Per√∫</h3>
              <p class="collection-meta">Cartulina, l√°piz y acuarela con identidad.</p>
              <span class="collection-cta">Explorar</span>
            </div>
          </a>
        </article>

      </div>
    </section>

    <!-- BURBUJAS -->
    <a class="bubble bubble-ig" href="https://instagram.com/" target="_blank" aria-label="Abrir Instagram">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path fill="currentColor" d="M7 2C4.243 2 2 4.243 2 7v10c0 2.757 2.243 5 5 5h10c2.757 0 5-2.243 5-5V7c0-2.757-2.243-5-5-5H7zm0 2h10c1.654 0 3 1.346 3 3v10c0 1.654-1.346 3-3 3H7c-1.654 0-3-1.346-3-3V7c0-1.654 1.346-3 3-3zm5 2a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6zm6.5-.75a1 1 0 100 2 1 1 0 000-2z"/>
      </svg>
    </a>

    <!-- Ahora la burbuja de contacto lleva al formulario (sin modal) -->
    <a class="bubble bubble-contact" href="#reservar" aria-label="Ir al formulario">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path fill="currentColor" d="M21 15a2 2 0 01-2 2h-2a2 2 0 00-2 2v1H9v-1a2 2 0 00-2-2H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v9zM7 8h10v2H7V8z"/>
      </svg>
    </a>

  </main>

  <!-- JS global propio (si lo tienes) -->
  <script src="arte.js"></script>

  <!-- Lazy loader de videos -->
  <script>
    (function lazyVideos(){
      const vids = document.querySelectorAll('video.lazy-video');
      const loadVideo = (video) => {
        const vSrc = video.getAttribute('data-src');
        if (vSrc) { video.src = vSrc; video.removeAttribute('data-src'); }
        const sources = video.querySelectorAll('source[data-src]');
        if (sources.length){ sources.forEach(s=>{ s.src = s.dataset.src; s.removeAttribute('data-src'); }); video.load(); }
        const tryPlay = () => video.play().catch(()=>{});
        tryPlay(); document.addEventListener('visibilitychange', ()=>{ if(!document.hidden) tryPlay(); });
      };
      if ('IntersectionObserver' in window){
        const io = new IntersectionObserver((entries,obs)=>entries.forEach(en=>{ if(en.isIntersecting){ loadVideo(en.target); obs.unobserve(en.target); } }),{threshold:.25});
        vids.forEach(v=>io.observe(v));
      } else { vids.forEach(loadVideo); }
    })();
  </script>

  <!-- Firebase + Firestore (modular CDN) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
    import { getFirestore, addDoc, collection, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBD6ZQYAbY2ojjm0yiuCnkhXuT13ZnobWM",
      authDomain: "arte-da57d.firebaseapp.com",
      projectId: "arte-da57d",
      storageBucket: "arte-da57d.firebasestorage.app",
      messagingSenderId: "134306013865",
      appId: "1:134306013865:web:96f862a046eb0562103fb8",
      measurementId: "G-JJYJ884MKF"
    };

    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    // Helpers
    const $ = (s,c=document)=>c.querySelector(s);
    const qs = (k)=> new URLSearchParams(location.search).get(k) || "";

    // Autorrelleno desde ?obra=&cat=&tipo=
    const obra = qs('obra');
    const cat  = qs('cat');
    const tipo = qs('tipo');

    const fObra = $('#f_obra');
    const fCat  = $('#f_categoria');
    const fTipo = $('#f_tipo');

    if (obra){ fObra.value = decodeURIComponent(obra); fObra.readOnly = true; }
    else     { fObra.readOnly = false; fObra.placeholder = "Escribe la obra o producto"; }

    if (cat){ fCat.value = decodeURIComponent(cat); fCat.readOnly = true; }
    else    { fCat.readOnly = false; fCat.placeholder = "Selecciona o escribe la categor√≠a"; }

    if (tipo){ fTipo.value = tipo; }

    // Enviar a Firestore
    const form   = $('#reservaForm');
    const btn    = $('#f_submit');
    const status = $('#f_status');

    form?.addEventListener('submit', async (e)=>{
      e.preventDefault();
      status.textContent = '';

      // Recolectar ‚Äúmedios‚Äù
      const medios = [...document.querySelectorAll('input[name="medio"]:checked')].map(i=>i.value);

      // Construir payload
      const payload = {
        obra: fObra.value.trim() || null,
        categoria: fCat.value.trim() || null,
        tipo: fTipo.value || null,                // original | tarjeta | encargo | visita
        nombre: $('#f_nombre').value.trim(),
        telefono: $('#f_tel').value.trim(),
        email: $('#f_email').value.trim() || null,
        pais: $('#f_pais').value.trim(),
        medios,                                   // ej: ["whatsapp","email"]
        notas: $('#f_notas').value.trim() || null,

        page_title: document.title,
        page_url: location.href,
        referrer: document.referrer || null,
        user_agent: navigator.userAgent,
        created_at: serverTimestamp()
      };

      // Validaciones m√≠nimas
      if (!payload.nombre){ status.textContent = 'Escribe tu nombre.'; $('#f_nombre').focus(); return; }
      if (!payload.telefono){ status.textContent = 'Indica tu WhatsApp o tel√©fono.'; $('#f_tel').focus(); return; }
      if (!payload.pais){ status.textContent = 'Indica tu pa√≠s.'; $('#f_pais').focus(); return; }

      btn.disabled = true; btn.textContent = 'Enviando‚Ä¶';
      try{
        await addDoc(collection(db,'pedidos'), payload);
        status.textContent = '¬°Gracias! Recibimos tu pedido. Te contactaremos pronto.';
        form.reset();
      }catch(err){
        console.error(err);
        status.textContent = 'Hubo un error al guardar. Intenta nuevamente.';
      }finally{
        btn.disabled = false; btn.textContent = 'Enviar pedido';
      }
    });
  </script>
</body>
</html>
